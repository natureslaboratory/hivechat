{"version":3,"sources":["webpack://@natureslaboratory/hivechat/./js/src/classes/Organisation.ts","webpack://@natureslaboratory/hivechat/webpack/bootstrap","webpack://@natureslaboratory/hivechat/./js/src/index.ts"],"names":[],"mappings":"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","file":"./js/index.js","sourcesContent":["export default class Organisation\n{\n    node : HTMLElement;\n    orgName : HTMLInputElement;\n    orgNameInfo : HTMLElement;\n    orgSlug : HTMLInputElement;\n    orgSlugDisplay : HTMLElement;\n    submitButton : HTMLInputElement;\n    currentName : string;\n    timeout;\n\n    constructor(node : HTMLElement) {\n        this.node = node;\n        \n        this.orgName = this.getPerchElement(\"organisationName\", \"form-control\") as HTMLInputElement;\n        if (!this.orgName) {\n            throw new Error(\"No Valid orgName\");\n        }\n\n        if (this.orgName.value) {\n            this.currentName = this.orgName.value.trim();\n        }\n\n        this.orgNameInfo = this.node.getElementsByClassName(\"org-name-info\")[0] as HTMLElement;\n        if (!this.orgNameInfo) {\n            throw new Error(\"No Valid orgNameInfo\");\n        }\n\n        this.orgSlug = this.getPerchElement(\"organisationSlug\", \"form-control\") as HTMLInputElement;\n        if (!this.orgSlug) {\n            throw new Error(\"No Valid orgSlug\");\n        }\n\n        this.orgSlugDisplay = this.node.getElementsByClassName(\"slug-container\")[0] as HTMLElement;\n        if (!this.orgSlugDisplay) {\n            throw new Error(\"No Valid orgSlugDisplay\");\n        }\n\n        this.submitButton = this.node.getElementsByClassName(\"organisationSubmit\")[0] as HTMLInputElement;\n        if (!this.submitButton) {\n            throw new Error(\"No Valid submitButton\");\n        }\n\n        this.addEventListeners();\n\n    }\n\n    private getPerchElement(id : string, className : string)\n    {\n        let array = this.node.getElementsByClassName(className) as HTMLCollectionOf<HTMLElement>;\n        return Array.from(array).filter(el => el.id.includes(id))[0];\n    }\n\n    private slugify(title : string)\n    {\n        let newTitle = title.trim().toLowerCase();\n        let newDashedTitle = newTitle.split(\" \").map((word) => {\n            let newWord = \"\";\n            for (let i = 0; i < word.length; i++) {\n                const letter = word[i];\n                let pattern = /[A-Za-z0-9]/;\n                if (!pattern.test(letter)) {\n                    continue\n                } else {\n                    newWord += letter;\n                }\n            }\n            return newWord;\n        }).join(\"-\");\n        return newDashedTitle;\n    }\n\n    private checkName(slug : string) {\n        clearTimeout(this.timeout);\n        if (!slug) {\n            this.submitButton.disabled = true;\n            this.orgNameInfo.innerHTML = null;\n        } else {\n            this.timeout = setTimeout(async () => {\n                await fetch(`/page-api/isorganisation?s=${slug}`)\n                    .then(response => response.json())\n                    .then(data => {\n                        if (data) {\n                            if (!(data.organisationName == this.currentName)) {\n                                this.setUnavailable();\n                            } else {\n                                this.setNeutral();\n                            }\n                        } else {\n                            this.setAvailable();\n                        }\n                    })\n            }, 300)\n        }\n    }\n\n    private setNeutral()\n    {\n        this.orgName.classList.remove(\"unavailable\");\n        this.orgName.classList.remove(\"available\");\n        this.orgNameInfo.innerHTML = \"\";\n        this.enableButton();\n    }\n\n    private setAvailable()\n    {\n        this.orgName.classList.remove(\"unavailable\");\n        this.orgName.classList.add(\"available\");\n        this.orgNameInfo.innerHTML = \"Available\"\n        this.enableButton();\n    }\n\n    private setUnavailable()\n    {\n        this.orgName.classList.add(\"unavailable\");\n        this.orgName.classList.remove(\"available\");\n        this.orgNameInfo.innerHTML = \"Unavailable\"\n        this.disableButton();\n    }\n\n    private disableButton()\n    {\n        this.submitButton.disabled = true;\n    }\n\n    private enableButton()\n    {\n        this.submitButton.disabled = false;\n    }\n\n    private updateValues()\n    {\n        let slug = this.slugify(this.orgName.value);\n        this.orgSlugDisplay.innerHTML = slug;\n        this.orgSlug.value = slug;\n        this.checkName(slug)\n    }\n\n    private addEventListeners()\n    {\n        this.orgName.addEventListener(\"keyup\", () => {\n            this.updateValues()\n        })\n        \n        this.orgName.addEventListener(\"change\", () => {\n            this.updateValues()\n        })\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import Organisation from \"./classes/Organisation\";\n\n// const getElementById = (id : string, className : string) => {\n//     let array = document.getElementsByClassName(className) as HTMLCollectionOf<HTMLElement>;\n//     return Array.from(array).filter(el => el.id.includes(id))[0];\n// }\n\n// const isValidWord = word => {\n//     let valid = true;\n//     for (let i = 0; i < word.length; i++) {\n//         const letter = word[i];\n//         let pattern = /[A-Za-z0-9]/;\n//         if (!pattern.test(letter)) {\n//             valid = false;\n//         }\n//     }\n//     return valid;\n// }\n\n// const slugify = (title : string) => {\n//     let newTitle = title.trim().toLowerCase();\n//     let newDashedTitle = newTitle.split(\" \").map((word) => {\n//         let newWord = \"\";\n//         for (let i = 0; i < word.length; i++) {\n//             const letter = word[i];\n//             let pattern = /[A-Za-z0-9]/;\n//             if (!pattern.test(letter)) {\n//                 continue\n//             } else {\n//                 newWord += letter;\n//             }\n//         }\n//         return newWord;\n//     }).join(\"-\");\n//     return newDashedTitle;\n// }\n\n// const formInput = getElementById(\"organisationSlug\", \"form-control\") as HTMLInputElement;\n// const slugContainer = document.getElementById(\"slug-container\");\n// const orgName = getElementById(\"organisationName\", \"form-control\") as HTMLInputElement;\n// const orgNameInfo = orgName.nextElementSibling;\n// const submit = getElementById(\"submit-button\", \"btn-secondary\") as HTMLInputElement;\n// submit.disabled = true;\n// let timeout;\n\n// const checkName = (slug) => {\n//     clearTimeout(timeout);\n//     if (!slug) {\n//         submit.disabled = true;\n//         orgNameInfo.innerHTML = null;\n//     } else {\n//         timeout = setTimeout(async () => {\n//             await fetch(`/page-api/isorganisation?s=${slug}`)\n//                 .then(response => response.json())\n//                 .then(data => {\n//                     if (data) {\n//                         console.log(\"Taken\")\n//                         orgName.classList.remove(\"available\");\n//                         orgName.classList.add(\"unavailable\");\n//                         orgNameInfo.innerHTML = \"Unavailable\"\n//                         submit.disabled = true;\n//                     } else {\n//                         console.log(\"Available\")\n//                         orgName.classList.remove(\"unavailable\");\n//                         orgName.classList.add(\"available\");\n//                         orgNameInfo.innerHTML = \"Available\"\n//                         submit.disabled = false;\n//                     }\n//                 })\n//         }, 300)\n//     }\n// }\n\n// orgName.addEventListener(\"keyup\", () => {\n//     let slug = slugify(orgName.value);\n//     slugContainer.innerHTML = slug;\n//     formInput.value = slug;\n//     checkName(slug)\n// })\n\n// orgName.addEventListener(\"change\", () => {\n//     let slug = slugify(orgName.value);\n//     slugContainer.innerHTML = slugify(orgName.value);\n//     formInput.value = slugify(orgName.value);\n//     checkName(slug)\n// })\n\n\nlet organisationForms = Array.from(document.getElementsByClassName(\"org-form\") as HTMLCollectionOf<HTMLElement>);\n\norganisationForms.forEach(form => {\n    try {\n        new Organisation(form);\n    } catch (error) {\n        console.log(\"Error\")\n    }\n})"],"sourceRoot":""}